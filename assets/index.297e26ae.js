import{P as h,K as z,f as v,Q as u,a3 as w,n as U,aA as K,F as J,k as I,E as D,l as T,e as E,O as V}from"./vendor.a2465f65.js";import{c as d,d as _,T as O,u as A,at as B,X as q,i as C}from"./index.001b24a5.js";import{a as G}from"./index.3d278fb0.js";/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const b=Symbol("paginationToken");/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const L={pageIndex:d.number.def(1),pageSize:d.number,disabled:d.bool.def(!1),itemRender:d.func(),pageSizes:d.arrayOf(Number),showQuickJumper:d.bool,showSizeChanger:d.bool,showTitle:d.bool,showTotal:d.bool,simple:d.bool,size:d.oneOf(["sm","md"]),total:d.number.def(0),totalRender:d.func(),"onUpdate:pageIndex":d.emit(),"onUpdate:pageSize":d.emit(),onChange:d.emit()},X={disabled:d.bool,index:d.number,type:d.oneOf(["page","prev","next","prev5","next5"]).isRequired},H={prev:"left",next:"right",prev5:"double-left",next5:"double-right",page:""},W={next:1,prev:-1,prev5:-5,next5:5};var k=h({props:X,setup(e){const{props:n,slots:t,config:s,locale:c,activeIndex:i,onPageIndexChange:r}=z(b),a=v(()=>i.value===e.index),o=v(()=>e.disabled||n.disabled),m=v(()=>{var p;return(p=n.showTitle)!=null?p:s.showTitle}),l=v(()=>{var p,x;return(x=(p=t.item)!=null?p:n.itemRender)!=null?x:s.itemRender}),g=v(()=>({"ix-pagination-item":!0,"ix-pagination-item-active":a.value})),R=v(()=>{if(!m.value)return;const{type:p,index:x}=e;return p==="page"?x.toString():c.value[p]}),F=()=>{if(o.value)return;const{type:p,index:x}=e;let f;p==="page"?f=x:f=i.value+W[p],r(f)};return()=>{const{index:p,type:x}=e,f=o.value,N=a.value,M=l.value;let P;const j=H[x],y={mode:"text",size:"sm",shape:"circle"};e.type==="prev5"||x==="next5"?P=u("span",{class:"ix-pagination-item-jumper"},[u(_,w(y,{icon:j,disabled:f}),null),u(_,w(y,{class:"ix-pagination-item-ellipsis",icon:"ellipsis",disabled:f}),null)]):U(p)?P=u(_,w(y,{icon:j,disabled:f}),null):P=u(_,w(y,{icon:j,disabled:f}),{default:()=>[p]});const Q=M?M({index:p,type:x,active:N,disabled:f,original:P}):P;return u("li",{class:g.value,title:R.value,onClick:F},[Q])}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function $(e){const{activeIndex:n,onPageIndexChange:t}=z(b);return K(c=>{const i=c.target,r=Math.floor(q(i.value,n.value));t(r),e&&(i.value="")},["enter"])}var Y=h({setup(){const{props:e,config:n,locale:t}=z(b),s=v(()=>{var i;return(i=e.size)!=null?i:n.size}),c=$(!0);return()=>{const{disabled:i}=e,{jumpTo:r,page:a}=t.value;return u("li",{class:"ix-pagination-jumper"},[r,u(O,{disabled:i,size:s.value,onKeydown:c},null),a])}}}),Z=h({setup(){const{props:e,config:n,locale:t,activeSize:s,onPageSizeChange:c}=z(b),i=v(()=>{var o;return(o=e.size)!=null?o:n.size}),r=v(()=>{var o;return(o=e.pageSizes)!=null?o:n.pageSizes}),a=v(()=>r.value.map(o=>({value:o,label:`${o} ${t.value.itemsPerPage}`})));return()=>u("li",{class:"ix-pagination-sizes"},[u(G,{disabled:e.disabled,options:a.value,size:i.value,value:s.value,onChange:c},null)])}}),ee=h({setup(){const{props:e,config:n,activeIndex:t,activeSize:s}=z(b),c=ne(e,t,s),i=v(()=>{var a;return(a=e.showQuickJumper)!=null?a:n.showQuickJumper}),r=v(()=>{var a;return(a=e.showSizeChanger)!=null?a:n.showSizeChanger});return()=>u(J,null,[c.value.map(a=>u(k,w({key:a.type+"-"+a.index},a),null)),r.value?u(Z,null,null):null,i.value?u(Y,null,null):null])}});const ne=(e,n,t)=>v(()=>{const s=Math.ceil(e.total/t.value);return te(n.value,s)}),te=(e,n)=>{let t;n<=9?t=S(1,n):t=ae(e,n);const s={type:"prev",disabled:e===1},c={type:"next",disabled:e===n};return[s,...t,c]},S=(e,n)=>{const t=[];for(let s=e;s<=n;s++)t.push({index:s,type:"page"});return t},ae=(e,n)=>{let t=[];const s={type:"prev5"},c={type:"next5"};e<5?t=[...S(2,5),c]:e<n-3?t=[s,...S(e-2,e+2),c]:t=[s,...S(n-4,n-1)];const i=S(1,1),r=S(n,n);return[...i,...t,...r]};var le=h({setup(){const{props:e,config:n,activeIndex:t,activeSize:s}=z(b),c=v(()=>{var l;return(l=e.size)!=null?l:n.size}),i=I(0),r=I(!1),a=I(!1);D(()=>{const l=Math.ceil(e.total/s.value);i.value=l,r.value=t.value===1,a.value=t.value===l});const o=I(t.value.toString());T(t,l=>{o.value=l.toString()});const m=$(!1);return()=>u(J,null,[u(k,{disabled:r.value,type:"prev"},null),u("li",{class:"ix-pagination-item"},[u(O,{value:o.value,"onUpdate:value":l=>o.value=l,disabled:e.disabled,size:c.value,onKeydown:m},null),u("span",{class:"ix-pagination-item-slash"},[E("/")]),u("span",null,[i.value])]),u(k,{disabled:a.value,type:"next"},null)])}}),ie=h({setup(){const{props:e,slots:n,config:t,locale:s,activeIndex:c,activeSize:i}=z(b),r=v(()=>{var o,m;return(m=(o=n.total)!=null?o:e.totalRender)!=null?m:t.totalRender}),a=v(()=>{const o=c.value,m=i.value,l=(o-1)*m+1,g=Math.min(o*m,e.total);return[l,g]});return()=>{const{total:o}=e,{totalPrefix:m,totalSuffix:l}=s.value,g=r.value,R=g?g({total:o,range:a.value}):`${m} ${o} ${l}`;return u("li",{class:"ix-pagination-total"},[R])}}}),se=h({name:"IxPagination",props:L,setup(e,{slots:n}){const t=A("pagination");re(e,n,t);const s=v(()=>{var a;return(a=e.showTotal)!=null?a:t.showTotal}),c=v(()=>{var a;return(a=e.simple)!=null?a:t.simple}),i=v(()=>{var a;return(a=e.size)!=null?a:t.size}),r=oe(e,c,i);return()=>u("ul",{class:r.value},[s.value?u(ie,null,null):null,c.value?u(le,null,null):u(ee,null,null)])}});const oe=(e,n,t)=>v(()=>({"ix-pagination":!0,"ix-pagination-disabled":e.disabled,"ix-pagination-simple":n.value,[`ix-pagination-${t.value}`]:!0})),ue=(e,n)=>e>n?n:e<1?1:e,re=(e,n,t)=>{const s=B("pagination"),c=v(()=>{var l;return(l=e.pageSize)!=null?l:t.pageSize}),i=I(c.value),r=I(e.pageIndex),a=v(()=>Math.ceil(e.total/i.value)),o=l=>{const g=ue(l,a.value);g!==r.value&&(r.value=g,C(e["onUpdate:pageIndex"],g),C(e.onChange,g,i.value))},m=l=>{i.value=l,C(e["onUpdate:pageSize"],l),C(e.onChange,r.value,l)};T(c,l=>i.value=l),T(()=>e.pageIndex,l=>r.value=l),T([r,a],([l,g])=>{l>g&&o(g)},{immediate:!0}),V(b,{props:e,slots:n,config:t,locale:s,activeIndex:r,activeSize:i,onPageIndexChange:o,onPageSizeChange:m})};/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const pe=se;export{pe as I};
