import{c as o,z as me,$ as $e,u as pe,F as be,a8 as Oe,i as I,W as Se,s as ge,C as De,D as ye,T as Ce}from"./index.789a60d9.js";import{P as L,f as m,Q as _,k as K,E as _e,a3 as j,K as Me,ah as Q}from"./vendor.a2465f65.js";var X=60,ee=X*60,te=ee*24,Pe=te*7,x=1e3,B=X*x,ne=ee*x,Ie=te*x,Ee=Pe*x,Z="millisecond",F="second",H="minute",w="hour",E="day",U="week",g="month",ae="quarter",T="year",V="date",Te="YYYY-MM-DDTHH:mm:ssZ",re="Invalid Date",Ae=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,xe=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Fe={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},J=function(t,n,a){var r=String(t);return!r||r.length>=n?t:""+Array(n+1-r.length).join(a)+t},He=function(t){var n=-t.utcOffset(),a=Math.abs(n),r=Math.floor(a/60),s=a%60;return""+(n<=0?"+":"-")+J(r,2,"0")+":"+J(s,2,"0")},we=function e(t,n){if(t.date()<n.date())return-e(n,t);var a=(n.year()-t.year())*12+(n.month()-t.month()),r=t.clone().add(a,g),s=n-r<0,i=t.clone().add(a+(s?-1:1),g);return+(-(a+(n-r)/(s?r-i:i-r))||0)},Ve=function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},ke=function(t){var n={M:g,y:T,w:U,d:E,D:V,h:w,m:H,s:F,ms:Z,Q:ae};return n[t]||String(t||"").toLowerCase().replace(/s$/,"")},Le=function(t){return t===void 0},je={s:J,z:He,m:we,a:Ve,p:ke,u:Le},k="en",A={};A[k]=Fe;var q=function(t){return t instanceof R},N=function(t,n,a){var r;if(!t)return k;if(typeof t=="string")A[t]&&(r=t),n&&(A[t]=n,r=t);else{var s=t.name;A[s]=t,r=s}return!a&&r&&(k=r),r||!a&&k},h=function(t,n){if(q(t))return t.clone();var a=typeof n=="object"?n:{};return a.date=t,a.args=arguments,new R(a)},Ue=function(t,n){return h(t,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})},v=je;v.l=N;v.i=q;v.w=Ue;var Ne=function(t){var n=t.date,a=t.utc;if(n===null)return new Date(NaN);if(v.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var r=n.match(Ae);if(r){var s=r[2]-1||0,i=(r[7]||"0").substring(0,3);return a?new Date(Date.UTC(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(n)},R=function(){function e(n){this.$L=N(n.locale,null,!0),this.parse(n)}var t=e.prototype;return t.parse=function(a){this.$d=Ne(a),this.$x=a.x||{},this.init()},t.init=function(){var a=this.$d;this.$y=a.getFullYear(),this.$M=a.getMonth(),this.$D=a.getDate(),this.$W=a.getDay(),this.$H=a.getHours(),this.$m=a.getMinutes(),this.$s=a.getSeconds(),this.$ms=a.getMilliseconds()},t.$utils=function(){return v},t.isValid=function(){return this.$d.toString()!==re},t.isSame=function(a,r){var s=h(a);return this.startOf(r)<=s&&s<=this.endOf(r)},t.isAfter=function(a,r){return h(a)<this.startOf(r)},t.isBefore=function(a,r){return this.endOf(r)<h(a)},t.$g=function(a,r,s){return v.u(a)?this[r]:this.set(s,a)},t.unix=function(){return Math.floor(this.valueOf()/1e3)},t.valueOf=function(){return this.$d.getTime()},t.startOf=function(a,r){var s=this,i=v.u(r)?!0:r,u=v.p(a),l=function(M,O){var p=v.w(s.$u?Date.UTC(s.$y,O,M):new Date(s.$y,O,M),s);return i?p:p.endOf(E)},f=function(M,O){var p=[0,0,0,0],P=[23,59,59,999];return v.w(s.toDate()[M].apply(s.toDate("s"),(i?p:P).slice(O)),s)},d=this.$W,c=this.$M,$=this.$D,b="set"+(this.$u?"UTC":"");switch(u){case T:return i?l(1,0):l(31,11);case g:return i?l(1,c):l(0,c+1);case U:{var S=this.$locale().weekStart||0,D=(d<S?d+7:d)-S;return l(i?$-D:$+(6-D),c)}case E:case V:return f(b+"Hours",0);case w:return f(b+"Minutes",1);case H:return f(b+"Seconds",2);case F:return f(b+"Milliseconds",3);default:return this.clone()}},t.endOf=function(a){return this.startOf(a,!1)},t.$set=function(a,r){var s,i=v.p(a),u="set"+(this.$u?"UTC":""),l=(s={},s[E]=u+"Date",s[V]=u+"Date",s[g]=u+"Month",s[T]=u+"FullYear",s[w]=u+"Hours",s[H]=u+"Minutes",s[F]=u+"Seconds",s[Z]=u+"Milliseconds",s)[i],f=i===E?this.$D+(r-this.$W):r;if(i===g||i===T){var d=this.clone().set(V,1);d.$d[l](f),d.init(),this.$d=d.set(V,Math.min(this.$D,d.daysInMonth())).$d}else l&&this.$d[l](f);return this.init(),this},t.set=function(a,r){return this.clone().$set(a,r)},t.get=function(a){return this[v.p(a)]()},t.add=function(a,r){var s=this,i;a=Number(a);var u=v.p(r),l=function($){var b=h(s);return v.w(b.date(b.date()+Math.round($*a)),s)};if(u===g)return this.set(g,this.$M+a);if(u===T)return this.set(T,this.$y+a);if(u===E)return l(1);if(u===U)return l(7);var f=(i={},i[H]=B,i[w]=ne,i[F]=x,i)[u]||1,d=this.$d.getTime()+a*f;return v.w(d,this)},t.subtract=function(a,r){return this.add(a*-1,r)},t.format=function(a){var r=this,s=this.$locale();if(!this.isValid())return s.invalidDate||re;var i=a||Te,u=v.z(this),l=this.$H,f=this.$m,d=this.$M,c=s.weekdays,$=s.months,b=s.meridiem,S=function(p,P,C,z){return p&&(p[P]||p(r,i))||C[P].substr(0,z)},D=function(p){return v.s(l%12||12,p,"0")},y=b||function(O,p,P){var C=O<12?"AM":"PM";return P?C.toLowerCase():C},M={YY:String(this.$y).slice(-2),YYYY:this.$y,M:d+1,MM:v.s(d+1,2,"0"),MMM:S(s.monthsShort,d,$,3),MMMM:S($,d),D:this.$D,DD:v.s(this.$D,2,"0"),d:String(this.$W),dd:S(s.weekdaysMin,this.$W,c,2),ddd:S(s.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(l),HH:v.s(l,2,"0"),h:D(1),hh:D(2),a:y(l,f,!0),A:y(l,f,!1),m:String(f),mm:v.s(f,2,"0"),s:String(this.$s),ss:v.s(this.$s,2,"0"),SSS:v.s(this.$ms,3,"0"),Z:u};return i.replace(xe,function(O,p){return p||M[O]||u.replace(":","")})},t.utcOffset=function(){return-Math.round(this.$d.getTimezoneOffset()/15)*15},t.diff=function(a,r,s){var i,u=v.p(r),l=h(a),f=(l.utcOffset()-this.utcOffset())*B,d=this-l,c=v.m(this,l);return c=(i={},i[T]=c/12,i[g]=c,i[ae]=c/3,i[U]=(d-f)/Ee,i[E]=(d-f)/Ie,i[w]=d/ne,i[H]=d/B,i[F]=d/x,i)[u]||d,s?c:v.a(c)},t.daysInMonth=function(){return this.endOf(g).$D},t.$locale=function(){return A[this.$L]},t.locale=function(a,r){if(!a)return this.$L;var s=this.clone(),i=N(a,r,!0);return i&&(s.$L=i),s},t.clone=function(){return v.w(this.$d,this)},t.toDate=function(){return new Date(this.valueOf())},t.toJSON=function(){return this.isValid()?this.toISOString():null},t.toISOString=function(){return this.$d.toISOString()},t.toString=function(){return this.$d.toUTCString()},e}(),se=R.prototype;h.prototype=se;[["$ms",Z],["$s",F],["$m",H],["$H",w],["$W",E],["$M",g],["$y",T],["$D",V]].forEach(function(e){se[e[1]]=function(t){return this.$g(t,e[0],e[1])}});h.extend=function(e,t){return e.$i||(e(t,R,h),e.$i=!0),h};h.locale=N;h.isDayjs=q;h.unix=function(e){return h(e*1e3)};h.en=A[k];h.Ls=A;h.p={};var Re=Object.defineProperty,Ye=Object.defineProperties,We=Object.getOwnPropertyDescriptors,ie=Object.getOwnPropertySymbols,ze=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable,oe=(e,t,n)=>t in e?Re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Y=(e,t)=>{for(var n in t||(t={}))ze.call(t,n)&&oe(e,n,t[n]);if(ie)for(var n of ie(t))Be.call(t,n)&&oe(e,n,t[n]);return e},W=(e,t)=>Ye(e,We(t));const ue={disabledHours:o.func().def(()=>[]),disabledMinutes:o.func().def(()=>[]),disabledSeconds:o.func().def(()=>[]),hideDisabledOptions:o.bool.def(!1),hourStep:o.number.def(1),minuteStep:o.number.def(1),secondStep:o.number.def(1)},le=W(Y({},ue),{open:o.bool,control:me,autofocus:o.bool,borderless:o.bool,clearable:o.bool,clearIcon:o.string,clearText:o.string,format:o.string.def("HH:mm:ss"),overlayClassName:o.string,size:o.oneOf(["sm","md","lg"]),suffix:o.string,"onUpdate:open":o.emit(),onClear:o.emit(),onFocus:o.emit(),onBlur:o.emit()}),Ze=W(Y({},le),{value:o.object(),defaultOpenValue:o.object().def(()=>h().hour(0).minute(0).second(0).toDate()),disabled:o.bool.def(!1),placeholder:o.string.def("\u8BF7\u9009\u62E9\u65F6\u95F4"),readonly:o.bool.def(!1),"onUpdate:value":o.emit(),onChange:o.emit()});W(Y({},le),{value:o.object(),defaultOpenValue:o.object(),disabled:o.oneOfType([o.bool,o.object()]).def(!1),placeholder:o.array().def(["\u8D77\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"]),readonly:o.oneOfType([o.bool,o.object()]).def(!1),separator:o.string,"onUpdate:value":o.emit(),onChange:o.emit()});const Je=W(Y({},ue),{value:o.object(),defaultOpenValue:o.object().def(()=>h().hour(0).minute(0).second(0).toDate()),visible:o.bool,hourEnabled:o.bool.def(!0),minuteEnabled:o.bool.def(!0),secondEnabled:o.bool.def(!0),use12Hours:o.bool.def(!1),amPmCapital:o.bool.def(!0),"onUpdate:value":o.emit(),onChange:o.emit()}),qe={selectedValue:o.oneOfType([o.number,o.string]).isRequired,options:o.arrayOf(o.object()).isRequired,visible:o.bool,onChange:o.emit()},Ge={disabled:o.bool.def(!1),selected:o.bool.def(!1),value:o.oneOfType([Number,String]).isRequired,onChange:o.emit()};var Ke=L({props:Ge,setup(e){const t=m(()=>({"ix-time-picker-panel-cell":!0,"ix-time-picker-panel-cell-disabled":e.disabled,"ix-time-picker-panel-cell-selected":e.selected})),n=()=>{!e.disabled&&!e.selected&&I(e.onChange,e.value)},a=m(()=>Qe(e.value));return()=>_("li",{class:t.value,onClick:n},[a.value])}});function Qe(e){return Se(e)?e.toString().padStart(2,"0"):e}var Xe=L({props:qe,setup(e){const t=K(null),n=r=>{I(e.onChange,r),Q(a)},a=(r=200)=>{var s,i;const u=t.value;if(u){const l=e.options.findIndex(d=>d.value===e.selectedValue),f=(i=(s=u.children[l])==null?void 0:s.offsetTop)!=null?i:0;ge({top:f,target:u,duration:r})}};return _e(()=>{e.visible&&Q(()=>a(0))}),()=>_("ul",{ref:t,class:"ix-time-picker-panel-column"},[e.options.map((r,s)=>{const{disabled:i,value:u}=r;return _(Ke,{key:s,disabled:i,selected:e.selectedValue===u,value:u,onChange:n},null)})])}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function ce(e){return/(?=h)[^aA]*$/.test(e)?`${e} a`:e}function fe(e,t=!1,n=!1){if(!t)return"";const a=e>=12?"pm":"am";return n?a.toUpperCase():a}function et(e,t){return t&&(e>12&&(e-=12),e===0&&(e=12)),e}function de(e,t,n){return t&&(n=n.toLowerCase(),n==="am"&&e>=12&&(e-=12),n==="pm"&&e<12&&(e+=12)),e}function tt(e,t,n,a){const r=Number(a);if(t==="hour"){const s=fe(e.hour(),n,!1);e=e.hour(de(r,n,s))}else t==="minute"?e=e.minute(r):t==="second"?e=e.second(r):t==="AM/PM"&&(e=e.hour(de(e.hour(),n,a.toString())));return e.millisecond(0).toDate()}var nt=L({name:"IxTimePickerPanel",props:Je,setup(e){const{hourOptionsProps:t,minuteOptionsProps:n,secondOptionsProps:a,amPmOptionsProps:r}=at(e),s=m(()=>{const i=[];return e.hourEnabled&&i.push(t.value),e.minuteEnabled&&i.push(n.value),e.secondEnabled&&i.push(a.value),e.use12Hours&&i.push(r.value),i});return()=>_("div",{class:"ix-time-picker-panel"},[s.value.map((i,u)=>_(Xe,j({key:u},i,{visible:e.visible}),null))])}});function at(e){const t=m(()=>{var y;return h((y=e.value)!=null?y:e.defaultOpenValue)}),n=m(()=>et(t.value.hour(),e.use12Hours)),a=m(()=>fe(t.value.hour(),e.use12Hours,e.amPmCapital)),[r,s,i,u]=rt(e,t),l=m(()=>st(e.use12Hours,e.hourStep,e.disabledHours(a.value),e.hideDisabledOptions)),f=m(()=>({selectedValue:n.value,options:l.value,onChange:r})),d=m(()=>G(60,e.minuteStep,e.disabledMinutes(n.value,a.value),e.hideDisabledOptions)),c=m(()=>({selectedValue:t.value.minute(),options:d.value,onChange:s})),$=m(()=>G(60,e.secondStep,e.disabledSeconds(n.value,t.value.minute(),a.value),e.hideDisabledOptions)),b=m(()=>({selectedValue:t.value.second(),options:$.value,onChange:i})),S=m(()=>it("",e.amPmCapital,e.hideDisabledOptions)),D=m(()=>({selectedValue:a.value,options:S.value,onChange:u}));return{hourOptionsProps:f,minuteOptionsProps:c,secondOptionsProps:b,amPmOptionsProps:D}}function rt(e,t){const n=(r,s)=>{const i=tt(t.value,r,e.use12Hours,s);I(e["onUpdate:value"],i),I(e.onChange,i)};return["hour","minute","second","AM/PM"].map(r=>s=>n(r,s))}function st(e,t,n,a){const r=G(e?12:24,t,n,a);if(e){const s=r.find(i=>i.value===0);s&&(s.value=12)}return r}function G(e,t,n,a){const r=[];for(let s=0;s<e;s+=t){const i=n.includes(s);(!i||!a)&&r.push({value:s,disabled:i})}return r}function it(e,t,n){return e=e.toLowerCase(),["am","pm"].map(a=>({disabled:e===a,value:t?a.toUpperCase():a})).filter(a=>!n||!a.disabled)}/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function ot(e){const t=K(),{accessor:n,control:a}=De();ye(a);const r=m(()=>n.disabled.value),s=c=>{var $;return($=t.value)==null?void 0:$.focus(c)},i=()=>{var c;return(c=t.value)==null?void 0:c.blur()};function u(c){var $;I(e.onChange,c),n.setValue(c),($=t.value)==null||$.focus()}function l(c){I(e.onClear,c),n.setValue(void 0)}function f(c){I(e.onBlur,c),n.markAsBlurred()}function d(c){I(e.onFocus,c)}return{inputRef:t,accessor:n,isDisabled:r,handleChange:u,handleClear:l,handleBlur:f,handleFocus:d,focus:s,blur:i}}function ut(e,t,n){return m(()=>{var a,r,s,i,u,l;return{borderless:(a=e.borderless)!=null?a:t.borderless,clearable:(r=e.clearable)!=null?r:t.clearable,clearIcon:(s=e.clearIcon)!=null?s:t.clearIcon,size:(u=(i=e.size)!=null?i:n==null?void 0:n.size.value)!=null?u:t.size,suffix:(l=e.suffix)!=null?l:t.suffix}})}function lt(e){return m(()=>{const{disabledHours:t,disabledMinutes:n,disabledSeconds:a,format:r,hideDisabledOptions:s,hourStep:i,minuteStep:u,secondStep:l}=e,f=ce(r);return{disabledHours:t,disabledMinutes:n,disabledSeconds:a,hideDisabledOptions:s,hourStep:i,minuteStep:u,secondStep:l,hourEnabled:/[hH]/.test(f),minuteEnabled:/m/.test(f),secondEnabled:/s/.test(f),use12Hours:/[aA]/.test(f),amPmCapital:/A/.test(f)}})}const ct=[0,8];function ft(e,t){return m(()=>({class:e.overlayClassName,clickOutside:!0,offset:ct,placement:"bottom",transitionName:"ix-fade",target:"ix-time-picker-panel-container",trigger:"click",["onUpdate:visible"]:t}))}var dt=L({name:"IxTimePicker",props:Ze,setup(e,{attrs:t,expose:n,slots:a}){const[r,s]=$e(e,"open",!1),{inputRef:i,accessor:u,isDisabled:l,handleChange:f,handleClear:d,handleBlur:c,handleFocus:$,focus:b,blur:S}=ot(e);n({focus:b,blur:S});const D=pe("timePicker"),y=Me(be,null),M=ut(e,D,y),O=lt(e),p=ft(e,s),P=m(()=>{const C=u.valueRef.value;return C?h(C).format(ce(e.format)):""});return()=>{const C={suffix:a.suffix,clearIcon:a.clearIcon},z=()=>{const he=r.value?"ix-input-focused":"";return _("div",{class:"ix-time-picker"},[_(Ce,j(M.value,t,{class:he,ref:i,value:P.value,disabled:l.value,readonly:e.readonly,placeholder:e.placeholder,onBlur:c,onFocus:$,onClear:d}),C)])},ve=()=>_(nt,j(O.value,{ref:"overlayRef",defaultOpenValue:e.defaultOpenValue,value:u.valueRef.value,visible:r.value,onChange:f}),null);return _(Oe,j(p.value,{visible:r.value,disabled:l.value||e.readonly}),{default:z,content:ve})}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const mt=dt;export{mt as I};
