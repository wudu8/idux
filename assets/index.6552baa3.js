import{P as z,K as I,f as c,Q as u,a3 as $,n as E,aA as V,F,k as C,E as A,l as T,e as B,O as q}from"./vendor.379ae99b.js";import{c as d,d as R,X as N,u as Q,au as G,$ as L,i as j}from"./index.418e0b9f.js";import{a as X}from"./index.9336df69.js";/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const b=Symbol("paginationToken");/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const H={pageIndex:d.number.def(1),pageSize:d.number,disabled:d.bool.def(!1),itemRender:d.func(),pageSizes:d.arrayOf(Number),showQuickJumper:d.bool,showSizeChanger:d.bool,showTitle:d.bool,showTotal:d.bool,simple:d.bool,size:d.oneOf(["sm","md"]),total:d.number.def(0),totalRender:d.func(),"onUpdate:pageIndex":d.emit(),"onUpdate:pageSize":d.emit(),onChange:d.emit()},W={disabled:d.bool,index:d.number,type:d.oneOf(["page","prev","next","prev5","next5"]).isRequired},Y={prev:"left",next:"right",prev5:"double-left",next5:"double-right",page:""},Z={next:1,prev:-1,prev5:-5,next5:5};var J=z({props:W,setup(e){const{props:n,slots:a,config:l,locale:o,mergedPrefixCls:v,activeIndex:i,onPageIndexChange:r}=I(b),m=c(()=>i.value===e.index),t=c(()=>e.disabled||n.disabled),f=c(()=>{var p;return(p=n.showTitle)!=null?p:l.showTitle}),s=c(()=>{var p,x;return(x=(p=a.item)!=null?p:n.itemRender)!=null?x:l.itemRender}),g=c(()=>{const p=`${v.value}-item`;return{[p]:!0,[`${p}-active`]:m.value}}),y=c(()=>{if(!f.value)return;const{type:p,index:x}=e;return p==="page"?x.toString():o.value[p]}),k=()=>{if(t.value)return;const{type:p,index:x}=e;let h;p==="page"?h=x:h=i.value+Z[p],r(h)};return()=>{const p=`${v.value}-item`,{index:x,type:h}=e,S=t.value,K=m.value,O=s.value;let w;const M=Y[h],_={mode:"text",size:"sm",shape:"circle"};e.type==="prev5"||h==="next5"?w=u("span",{class:`${p}-jumper`},[u(R,$(_,{icon:M,disabled:S}),null),u(R,$(_,{class:`"${p}-ellipsis`,icon:"ellipsis",disabled:S}),null)]):E(x)?w=u(R,$(_,{icon:M,disabled:S}),null):w=u(R,$(_,{icon:M,disabled:S}),{default:()=>[x]});const D=O?O({index:x,type:h,active:K,disabled:S,original:w}):w;return u("li",{class:g.value,title:y.value,onClick:k},[D])}}});/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */function U(e){const{activeIndex:n,onPageIndexChange:a}=I(b);return V(o=>{const v=o.target,i=Math.floor(L(v.value,n.value));a(i),e&&(v.value="")},["enter"])}var ee=z({setup(){const{props:e,config:n,locale:a,mergedPrefixCls:l}=I(b),o=c(()=>{var i;return(i=e.size)!=null?i:n.size}),v=U(!0);return()=>{const i=`${l.value}-jumper`,{disabled:r}=e,{jumpTo:m,page:t}=a.value;return u("li",{class:i},[m,u(N,{disabled:r,size:o.value,onKeydown:v},null),t])}}}),ne=z({setup(){const{props:e,config:n,locale:a,activeSize:l,onPageSizeChange:o,mergedPrefixCls:v}=I(b),i=c(()=>{var t;return(t=e.size)!=null?t:n.size}),r=c(()=>{var t;return(t=e.pageSizes)!=null?t:n.pageSizes}),m=c(()=>r.value.map(t=>({value:t,label:`${t} ${a.value.itemsPerPage}`})));return()=>{const t=`${v.value}-sizes`;return u("li",{class:t},[u(X,{disabled:e.disabled,options:m.value,size:i.value,value:l.value,onChange:o},null)])}}}),te=z({setup(){const{props:e,config:n,activeIndex:a,activeSize:l}=I(b),o=ae(e,a,l),v=c(()=>{var r;return(r=e.showQuickJumper)!=null?r:n.showQuickJumper}),i=c(()=>{var r;return(r=e.showSizeChanger)!=null?r:n.showSizeChanger});return()=>u(F,null,[o.value.map(r=>u(J,$({key:r.type+"-"+r.index},r),null)),i.value?u(ne,null,null):null,v.value?u(ee,null,null):null])}});const ae=(e,n,a)=>c(()=>{const l=Math.ceil(e.total/a.value);return le(n.value,l)}),le=(e,n)=>{let a;n<=9?a=P(1,n):a=se(e,n);const l={type:"prev",disabled:e===1},o={type:"next",disabled:e===n};return[l,...a,o]},P=(e,n)=>{const a=[];for(let l=e;l<=n;l++)a.push({index:l,type:"page"});return a},se=(e,n)=>{let a=[];const l={type:"prev5"},o={type:"next5"};e<5?a=[...P(2,5),o]:e<n-3?a=[l,...P(e-2,e+2),o]:a=[l,...P(n-4,n-1)];const v=P(1,1),i=P(n,n);return[...v,...a,...i]};var oe=z({setup(){const{props:e,config:n,activeIndex:a,activeSize:l,mergedPrefixCls:o}=I(b),v=c(()=>{var s;return(s=e.size)!=null?s:n.size}),i=C(0),r=C(!1),m=C(!1);A(()=>{const s=Math.ceil(e.total/l.value);i.value=s,r.value=a.value===1,m.value=a.value===s});const t=C(a.value.toString());T(a,s=>{t.value=s.toString()});const f=U(!1);return()=>{const s=`${o.value}-item`;return u(F,null,[u(J,{disabled:r.value,type:"prev"},null),u("li",{class:s},[u(N,{value:t.value,"onUpdate:value":g=>t.value=g,disabled:e.disabled,size:v.value,onKeydown:f},null),u("span",{class:`${s}-slash`},[B("/")]),u("span",null,[i.value])]),u(J,{disabled:m.value,type:"next"},null)])}}}),ie=z({setup(){const{props:e,slots:n,config:a,locale:l,activeIndex:o,activeSize:v,mergedPrefixCls:i}=I(b),r=c(()=>{var t,f;return(f=(t=n.total)!=null?t:e.totalRender)!=null?f:a.totalRender}),m=c(()=>{const t=o.value,f=v.value,s=(t-1)*f+1,g=Math.min(t*f,e.total);return[s,g]});return()=>{const t=`${i.value}-total`,{total:f}=e,{totalPrefix:s,totalSuffix:g}=l.value,y=r.value,k=y?y({total:f,range:m.value}):`${s} ${f} ${g}`;return u("li",{class:t},[k])}}}),re=z({name:"IxPagination",props:H,setup(e,{slots:n}){const a=Q("common"),l=c(()=>`${a.prefixCls}-pagination`),o=Q("pagination");ve(e,n,o,l);const v=c(()=>{var t;return(t=e.showTotal)!=null?t:o.showTotal}),i=c(()=>{var t;return(t=e.simple)!=null?t:o.simple}),r=c(()=>{var t;return(t=e.size)!=null?t:o.size}),m=ue(e,i,r,l);return()=>u("ul",{class:m.value},[v.value?u(ie,null,null):null,i.value?u(oe,null,null):u(te,null,null)])}});const ue=(e,n,a,l)=>c(()=>{const o=l.value;return{[o]:!0,[`${o}-disabled`]:e.disabled,[`${o}-simple`]:n.value,[`${o}-${a.value}`]:!0}}),ce=(e,n)=>e>n?n:e<1?1:e,ve=(e,n,a,l)=>{const o=G("pagination"),v=c(()=>{var s;return(s=e.pageSize)!=null?s:a.pageSize}),i=C(v.value),r=C(e.pageIndex),m=c(()=>Math.ceil(e.total/i.value)),t=s=>{const g=ce(s,m.value);g!==r.value&&(r.value=g,j(e["onUpdate:pageIndex"],g),j(e.onChange,g,i.value))},f=s=>{i.value=s,j(e["onUpdate:pageSize"],s),j(e.onChange,r.value,s)};T(v,s=>i.value=s),T(()=>e.pageIndex,s=>r.value=s),T([r,m],([s,g])=>{s>g&&t(g)},{immediate:!0}),q(b,{props:e,slots:n,config:a,locale:o,mergedPrefixCls:l,activeIndex:r,activeSize:i,onPageIndexChange:t,onPageSizeChange:f})};/**
 * @license
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://github.com/IDuxFE/idux/blob/main/LICENSE
 */const ge=re;export{ge as I};
